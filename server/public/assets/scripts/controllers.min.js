/*! clothing_app 2015-11-27 */
myApp.controller("MainController",["$scope","$http","$uibModal","DataService",function(a,b,c,d){a.dataService=d,a.itemFilter={},a.user={},a.items={},a.sizes=a.dataService.sizeData(),a.types=a.dataService.typeData(),a.updateUserData=function(){a.dataService.retrieveData().then(function(){a.user=a.dataService.peopleData()})},void 0===a.dataService.peopleData()&&a.updateUserData(),a.updateUserData(),a.updateSaleData=function(){a.dataService.getSaleItems().then(function(){a.items=a.dataService.saleItems()})},void 0===a.dataService.saleItems()&&a.updateSaleData(),a.updateSaleData(),a.open=function(a){var b=c.open({animation:!0,templateUrl:"templates/viewItemModal.html",controller:"ViewItemController",resolve:{item:function(){return a}}});b.result.then(function(){console.log("closed")})},a.logFilter=function(){console.log(a.itemFilter);var b={};for(var c in a.itemFilter){console.log(c),b[c]=[];for(var d in a.itemFilter[c])a.itemFilter[c][d]&&b[c].push(d)}console.log(b),a.dataService.queryItems(b)}}]),myApp.controller("ViewItemController",["$scope","$http","$uibModalInstance","DataService","item",function(a,b,c,d,e){a.item=e,a.user={},a.dataService=d,a.findUser=function(){return b.get("/user/seller",{params:{id:e.user_id}}).then(function(b){console.log("the seller",b),a.user=b.data[0]})},a.ok=function(){console.log(a.user),c.close("submitted")},a.cancel=function(){c.dismiss("cancel")},a.findUser()}]),myApp.controller("MyAccountController",["$scope","$http","DataService",function(a,b,c){console.log("ur in the account now"),a.dataService=c,a.updateUserData=function(){a.dataService.retrieveData().then(function(){a.user=a.dataService.peopleData()})},void 0===a.dataService.peopleData()?a.updateUserData():a.user=a.dataService.peopleData()}]),myApp.controller("MyClosetController",["$scope","$http","$uibModal","DataService",function(a,b,c,d){console.log("ur in the closet"),a.dataService=d,a.updateItemData=function(){a.dataService.getUserItems().then(function(){a.items=a.dataService.userItems()})},void 0===a.dataService.userItems()&&a.updateItemData(),a.items=a.dataService.userItems(),console.log(a.items),a.open=function(b){var d=c.open({animation:!0,templateUrl:"templates/addItemModal.html",controller:"AddItemController",size:b,resolve:{items:function(){return a.items}}});d.result.then(function(){console.log("closed"),a.updateItemData()})},a.remove=function(c){console.log(c),b["delete"]("/item",{params:{id:c._id}}).then(function(b){console.log(b),a.updateItemData()})}}]),myApp.controller("AddItemController",["$scope","$http","$uibModalInstance","DataService",function(a,b,c,d){a.item={},a.dataService=d,a.types=a.dataService.typeData(),a.sizes=a.dataService.sizeData(),a.ok=function(){console.log(a.item),b.post("/item",a.item).then(function(a){console.log(a)}),a.item={},c.close("submitted")},a.cancel=function(){c.dismiss("cancel")}}]);